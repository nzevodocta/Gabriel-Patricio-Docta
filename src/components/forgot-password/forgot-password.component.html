<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-dark to-primary-light p-4">
  <div class="w-full max-w-md bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 space-y-6">
    <div class="text-center">
      <h1 class="text-3xl font-bold text-primary-dark dark:text-white">Redefinir Palavra-passe</h1>
      <p class="text-slate-500 dark:text-slate-400 mt-2">
        @if (step() === 'find') {
          Insira o seu telefone ou email para encontrar a sua conta.
        } @else {
          Insira a sua nova palavra-passe para a conta: {{ identifier() }}
        }
      </p>
    </div>

    @if (step() === 'find') {
      <form (ngSubmit)="findUser()" class="space-y-6">
        <div>
          <label for="identifier" class="block text-sm font-medium text-slate-700 dark:text-slate-300">NÂº de Telefone ou Email</label>
          <input id="identifier" name="identifier" type="text" [(ngModel)]="identifier" required
                 class="mt-1 block w-full px-4 py-3 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-primary-dark focus:border-primary-dark sm:text-sm">
        </div>

        @if (error()) {
          <p class="text-sm text-red-500 text-center">{{ error() }}</p>
        }

        <div>
          <button type="submit"
                  class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-sm font-medium text-white bg-primary-dark hover:bg-primary-darker focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-dark transition-transform transform hover:scale-105">
            Encontrar Conta
          </button>
        </div>
      </form>
    } @else {
      <form (ngSubmit)="resetPassword()" class="space-y-6">
         <div>
          <label for="newPin" class="block text-sm font-medium text-slate-700 dark:text-slate-300">Nova Palavra-passe (PIN)</label>
          <input id="newPin" name="newPin" type="password" [(ngModel)]="newPin" required
                 class="mt-1 block w-full px-4 py-3 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-primary-dark focus:border-primary-dark sm:text-sm">
        </div>
         <div>
          <label for="confirmNewPin" class="block text-sm font-medium text-slate-700 dark:text-slate-300">Confirmar Nova Palavra-passe</label>
          <input id="confirmNewPin" name="confirmNewPin" type="password" [(ngModel)]="confirmNewPin" required
                 class="mt-1 block w-full px-4 py-3 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-primary-dark focus:border-primary-dark sm:text-sm">
        </div>

        @if (error()) {
          <p class="text-sm text-red-500 text-center">{{ error() }}</p>
        }
        @if (successMessage()) {
          <p class="text-sm text-green-500 text-center">{{ successMessage() }}</p>
        }

        <div>
          <button type="submit"
                  class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-sm font-medium text-white bg-primary-dark hover:bg-primary-darker focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-dark transition-transform transform hover:scale-105"
                  [disabled]="!!successMessage()">
            Redefinir Palavra-passe
          </button>
        </div>
      </form>
    }

    <p class="text-center text-sm text-slate-500 dark:text-slate-400">
      Lembra-se da sua palavra-passe?
      <a routerLink="/login" class="font-medium text-primary-dark hover:underline dark:text-primary-light">Voltar para o Login</a>
    </p>
  </div>
</div>
